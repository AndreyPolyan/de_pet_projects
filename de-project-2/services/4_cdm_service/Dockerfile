FROM python:3.10

ARG KAFKA_HOST  
ARG KAFKA_PORT 
ARG KAFKA_SOURCE_TOPIC
ARG KAFKA_CONSUMER_GROUP

ARG PG_WAREHOUSE_HOST
ARG PG_WAREHOUSE_PORT
ARG PG_WAREHOUSE_DBNAME
ARG PG_WAREHOUSE_USER
ARG PG_WAREHOUSE_PASSWORD

RUN apt-get update -y

COPY . .

RUN pip install -r requirements.txt

WORKDIR /src

EXPOSE 5004

ENTRYPOINT ["python"]

CMD ["app.py"]